<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>FourPawsCitizens - SingUp</title>
    <link rel="stylesheet" href="CSS/Styles.css" type="text/css">
</head>
<body class="singupBack">
<div class="SelectForm">
    <label for="listSingUp"> Seleccione rol: </label>
    <select name="listSingUp" id="listSingUp" onchange="ShowFields()">
        <option value="selectoption">Seleccione</option>
        <option value="vetSelect">Veterinario</option>
        <option value="ownerSelect">Propietario</option>
    </select>
</div>
<div class="VetSingUp">
    <form id="formSingUp" method="get">
        <fieldset id="fieldSetForm">
        </fieldset>
    </form>
</div>

<script type="text/javascript">
    function ShowFields() {
        var fieldSetForm = document.getElementById("fieldSetForm");
        var listTitlesVet = ["Usuario: ", "Contraseña:", "Email: ","Nombre de la Veterinaria: ", "Direccion: ", "Localidad:"];
        var listTitlesOwner = ["Usuario: ", "Contraseña:", "Email: ", "Documento de identidad: ", "Nombre Completo: ", "Direccion: ", "Localidad: "];
        var listAtributesVet = ["nameVet", "addressVet", "neigborhoodVet"];
        var listAtributesOwner = ["username", "password", "email", "person_id", "name", "address", "neighborhood"];
        var role = document.getElementById("listSingUp").value;

        if (fieldSetForm.hasChildNodes())
            fieldSetForm.removeChild(fieldSetForm.firstChild);
        var div = document.createElement("div");

        if (role === "vetSelect") {
            for (var i = 0; i < listTitlesVet.length; i++) {
                var label = document.createElement("label");
                label.setAttribute("for", listAtributesVet[i]);
                label.textContent = listTitlesVet[i];
                div.appendChild(label);
                var input = document.createElement("input");
                input.setAttribute("name", listAtributesVet[i]);
                input.setAttribute("id", listAtributesVet[i]);
                div.appendChild(input);
                div.appendChild(document.createElement("br"));
            }
            var inputButton = document.createElement("button");
            inputButton.type = "submit";
            inputButton.textContent = "Registrar";
            //inputButton.addEventListener("click",)//Aquí va la función
            div.appendChild(inputButton);

            fieldSetForm.appendChild(div);


        } else if (role === "ownerSelect") {
            for (var i = 0; i < listTitlesOwner.length; i++) {
                var label = document.createElement("label");
                label.setAttribute("for", listTitlesOwner[i]);
                label.textContent = listTitlesOwner[i];
                div.appendChild(label);
                var input = document.createElement("input");
                input.setAttribute("name", listAtributesOwner[i]);
                input.setAttribute("id", listAtributesOwner[i]);
                div.appendChild(input);
                div.appendChild(document.createElement("br"));
            }
            var inputButton = document.createElement("button");
            inputButton.type = "submit";
            inputButton.textContent = "Registrar";
            //inputButton.addEventListener("click",)//Aquí va la función
            div.appendChild(inputButton);

            fieldSetForm.appendChild(div);

        } else {
            alert("Seleccione una opción para continuar");
        }
    }
    function createOwner() {
        var url = 'http://localhost:8080/FourPawsCitizens-FootprintsSystem-1.0-SNAPSHOT/api/owners';
        var data = {
            "username": "pio",
            "password": "15632",
            "email": "adssda",
            "person_id": 130,
            "name": "el pepe",
            "address": "avenida tu corazon",
            "neighborhood": "fontibon"
        };

        fetch(url, {
            method: 'POST', // or 'PUT'
            body: JSON.stringify(data), // data can be `string` or {object}!
            headers: {
                'Content-Type': 'application/json'
            }
        }).then(res => res.json())
            .then(response => console.log('Success:', response));
    }
</script>
</body>
</html>